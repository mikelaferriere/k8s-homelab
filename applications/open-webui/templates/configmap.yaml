# https://docs.openwebui.com/getting-started/env-configuration
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: {{ .Values.app.name }}-config
data:
  ENABLE_SIGNUP: "true"
  WEBUI_URL: "https://chat.laferriere.ai"

  # websocket support
  ENABLE_WEBSOCKET_SUPPORT: "true"
  WEBSOCKET_MANAGER: redis
  WEBSOCKET_REDIS_URL: redis://open-webui-redis:6379/0

  # ollama
  ENABLE_OLLAMA_API: "true"
  OLLAMA_BASE_URLS: "http://ollama:11434"
  USE_OLLAMA_DOCKER: "false"
  USE_CUDA_DOCKER: "false"

  # openai
  ENABLE_OPENAI_API: "false"
  OPENAI_API_BASE_URL: http://open-webui-pipelines.ai:9099

  # rag
  RAG_EMBEDDING_ENGINE: "ollama"
  RAG_EMBEDDING_MODEL: "mxbai-embed-large"
  ENABLE_RAG_HYBRID_SEARCH: "true"
  RAG_OLLAMA_BASE_URL: "http://ollama:11434"

  # web search
  ENABLE_RAG_WEB_SEARCH: "true"
  ENABLE_SEARCH_QUERY_GENERATION: "true"
  RAG_WEB_SEARCH_ENGINE: "searxng"

  # searxng
  SEARXNG_QUERY_URL: http://searxng.ai:8080/search?q=<query>

  # image generation
  ENABLE_IMAGE_GENERATION: "false"
  IMAGE_GENERATION_ENGINE: "automatic1111"

  # OIDC
  ENABLE_OAUTH_SIGNUP: "true"
  OAUTH_MERGE_ACCOUNTS_BY_EMAIL: "true"
  # OAUTH_CLIENT_ID: ""
  # OAUTH_CLIENT_SECRET: ""
  OAUTH_SCOPES: "openid email profile"
  OPENID_PROVIDER_URL: "https://auth-k8s.laferriere.app/application/o/open-webui/.well-known/openid-configuration"
  OAUTH_PROVIDER_NAME: "Authentik"
  OPENID_REDIRECT_URI: "https://chat.laferriere.ai/oauth/oidc/callback"