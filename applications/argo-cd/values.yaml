---
argo-cd:
  global:
    addPrometheusAnnotations: true
    
  dex:
    enabled: false
  notifications:
    enabled: false
  applicationSet:
    enabled: true
  server:
    extraArgs:
      - --insecure
    service:
      annotations:
        metallb.universe.tf/loadBalancerIPs: 10.10.10.203
      type: LoadBalancer
  controller:
    metrics:
      enabled: true

  # configs:
  #   cmp:
  #     create: true
  #     plugins:
  #       argocd-cmp-cm:
  #         init:
  #           command: [sh]
  #           args: [-c, 'echo "Initializing..."']
  #         generate:
  #           command: [sh, -c]
  #           args:
  #             - |
  #               echo "{\"kind\": \"ConfigMap\", \"apiVersion\": \"v1\", \"metadata\": { \"name\": \"$ARGOCD_APP_NAME\", \"namespace\": \"$ARGOCD_APP_NAMESPACE\", \"annotations\": {\"Foo\": \"$ARGOCD_ENV_FOO\", \"KubeVersion\": \"$KUBE_VERSION\", \"KubeApiVersion\": \"$KUBE_API_VERSIONS\"}}}"
  #         discover:
  #           fileName: "./subdir/s*.yaml"
  #           find:
  #             glob: "**/Chart.yaml"
  #             command: [sh, -c, find . -name env.yaml]

  # repoServer:
  #   extraContainers:
  #     - name: cmp-helm-plugin
  #       command:
  #         - "/var/run/argocd/argocd-cmp-server"
  #       image: busybox
  #       securityContext:
  #         runAsNonRoot: true
  #         runAsUser: 999
  #       volumeMounts:
  #         - mountPath: /var/run/argocd
  #           name: var-files
  #         - mountPath: /home/argocd/cmp-server/plugins
  #           name: plugins
  #         - mountPath: /tmp
  #           name: cmp-tmp
  #   volumes:
  #     - name: argocd-cmp-cm
  #       configMap:
  #         name: argocd-cmp-cm
  #     - name: cmp-tmp
  #       emptyDir: {}
